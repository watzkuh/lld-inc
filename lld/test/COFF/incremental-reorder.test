# RUN: rm -rf %t.dir
# RUN: mkdir %t.dir
# RUN: yaml2obj %p/Inputs/extern-reorder.yaml > %t.dir/main.obj
# RUN: yaml2obj %p/Inputs/lorem-ipsum-reorder.yaml > %t.dir/reorder.obj
# RUN: lld-link /out:%t.dir/inc.exe /nodefaultlib /opt:noref /entry:main \
# RUN:  /incremental %t.dir/main.obj %t.dir/reorder.obj
# RUN: llvm-readobj --sections --section-data %t.dir/inc.exe > %t.dir/clean-link
# RUN: yaml2obj %p/Inputs/ipsum-lorem-reorder.yaml > %t.dir/reorder.obj
# RUN: lld-link /out:%t.dir/inc.exe /nodefaultlib /opt:noref /entry:main \
# RUN:  /incremental %t.dir/main.obj %t.dir/reorder.obj | FileCheck --check-prefix=INC %s

INC-NOT: Incremental link aborted

# RUN: llvm-readobj --sections --section-data %t.dir/inc.exe > %t.dir/incremental-link
# RUN: not diff %t.dir/incremental-link %t.dir/clean-link | FileCheck %s

CHECK:      <       0000: 4883EC28 C7442424 00000000 E86F0000  |H..(.D$$.....o..|
CHECK-NEXT: <       0010: 00894424 20E82600 00009048 83C428C3  |..D$ .&....H..(.|
CHECK-NEXT: ---
CHECK-NEXT: >       0000: 4883EC28 C7442424 00000000 E82F0000  |H..(.D$$...../..|
CHECK-NEXT: >       0010: 00894424 20E86600 00009048 83C428C3  |..D$ .f....H..(.|
CHECK-NEXT: 28c28
CHECK-NEXT: <       0040: B82A0000 00C3CCCC CCCCCCCC CCCCCCCC  |.*..............|
CHECK-NEXT: ---
CHECK-NEXT: >       0040: B8170000 00C3CCCC CCCCCCCC CCCCCCCC  |................|
CHECK-NEXT: 32c32
CHECK-NEXT: <       0080: B8170000 00C3                        |......|
CHECK-NEXT: ---
CHECK-NEXT: >       0080: B82A0000 00C3                        |.*....|
